<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Base64 Encoder/Decoder</title>

<link rel="stylesheet" href="../../assets/css/header.css">

<style>
body {
    font-family: "Segoe UI", system-ui;
    background: #f8fafc;
    padding: 8px;
    color: #1f2937;
}

h2 { margin-bottom: 10px; }

.toolbar {
    display: flex;
    gap: 10px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

button {
    padding: 8px 14px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    background: linear-gradient(135deg, #2563eb, #1d4ed8);
    color: #fff;
}

button.secondary {
    background: #e5e7eb;
    color: #111827;
}

.container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

textarea, .output {
    width: 100%;
    height: 60vh;
    font-family: Consolas, monospace;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #d1d5db;
    resize: none;
    white-space: pre-wrap;
    overflow: auto;
    background: #ffffff;
}
</style>
</head>

<body data-tool="Base64 Encoder/Decoder">
<script src="../../assets/js/header.js"></script>

<h2>üîê Base64 Encoder / Decoder (Text & File)</h2>

<div class="toolbar">
    <input type="file" id="fileInput">
    <button onclick="encodeText()">üîº Encode</button>
    <button onclick="decodeText()">üîΩ Decode</button>
    <button onclick="copyOutput()">üìÑ Copy Output</button>
    <button onclick="clearAll()" class="secondary">üßπ Clear</button>
</div>

<div class="container">
    <textarea id="inputText" placeholder="Paste text or upload a file..."></textarea>
    <textarea id="outputText" placeholder="Base64 output / Decoded content..." readonly></textarea>
</div>

<script>
const input = document.getElementById("inputText");
const output = document.getElementById("outputText");
const fileInput = document.getElementById("fileInput");

/* Encode text or file to Base64 */
function encodeText() {
    const file = fileInput.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            output.value = e.target.result.split(',')[1]; // remove data:image/...;base64,
        }
        reader.readAsDataURL(file);
    } else {
        try {
            output.value = btoa(unescape(encodeURIComponent(input.value)));
        } catch {
            output.value = "‚ùå Error encoding text";
        }
    }
}

/* Decode Base64 to text (for files, user needs to copy and create file manually) */
function decodeText() {
    try {
        const decoded = decodeURIComponent(escape(atob(input.value)));
        output.value = decoded;
    } catch {
        output.value = "‚ùå Invalid Base64 string";
    }
}

/* Copy output to clipboard */
function copyOutput() {
    if (!output.value) return;
    navigator.clipboard.writeText(output.value);
}

/* Clear input/output */
function clearAll() {
    input.value = "";
    output.value = "";
    fileInput.value = "";
}
</script>

</body>
</html>
